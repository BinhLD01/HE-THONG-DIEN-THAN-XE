<section>
  <header class="text-center mb-4">
    <h1>H·ªÜ TH·ªêNG CHI·∫æU S√ÅNG (PAN)</h1>
  </header>

  <!-- C√°c √¥ ch·ªçn -->
  <div class="text-center mb-4">
    <div class="selectable-box"><a href="Pan/HT_chieu_sang/TAIL.html">TAIL / S1 / SN</a></div>
    <div class="selectable-box"><a href="Pan/HT_chieu_sang/HEAD.html">HEAD / HRLY / A1 / NO.01</a></div>
    <div class="selectable-box"><a href="Pan/HT_chieu_sang/HU.html">HU / HF</a></div>
    <div class="selectable-box"><a href="Pan/HT_chieu_sang/DIM.html">DIM</a></div>
    <div class="selectable-box"><a href="Pan/HT_chieu_sang/E2.html">E2</a></div>
    <div class="selectable-box"><a href="Pan/HT_chieu_sang/RH_HIGH.html">RH HIGH</a></div>
  </div>

  <!-- V√πng hi·ªÉn th·ªã n·ªôi dung chi ti·∫øt -->
  <div id="content-area"
       style="background:#fff; border-radius:20px; padding:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1);">
    <p class="text-center">H√£y ch·ªçn m·ªôt m·ª•c ·ªü tr√™n ƒë·ªÉ hi·ªÉn th·ªã n·ªôi dung chi ti·∫øt t·∫°i ƒë√¢y.</p>
  </div>
<!-- Script ch√≠nh (b·∫£n v√°) -->
<script>
  // Bi·∫øn ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi => tuy·ªát ƒë·ªëi theo baseUrl
  function absolutizeAttr(root, selector, attr, baseUrl) {
    root.querySelectorAll(selector).forEach(el => {
      const val = el.getAttribute(attr);
      if (!val) return;
      // B·ªè qua c√°c lo·∫°i kh√¥ng c·∫ßn ƒë·ªïi
      if (/^(https?:|mailto:|tel:|#|data:)/i.test(val)) return;
      el.setAttribute(attr, new URL(val, baseUrl).href);
    });
  }

  // N·∫°p n·ªôi dung chi ti·∫øt v√†o content-area v√† chu·∫©n ho√° ƒë∆∞·ªùng d·∫´n
  function loadPanContent(url) {
    const area = document.getElementById('content-area');
    area.innerHTML = '<p class="text-center" style="color:#184e9e;">ƒêang t·∫£i n·ªôi dung...</p>';

    fetch(url)
      .then(response => {
        if (!response.ok) throw new Error("Kh√¥ng th·ªÉ t·∫£i n·ªôi dung: " + url);
        return response.text();
      })
      .then(html => {
        const temp = document.createElement('div');
        temp.innerHTML = html;

        // L·∫•y ph·∫ßn c·∫ßn hi·ªÉn th·ªã
        const section = temp.querySelector('section') || temp;

        // üîß Chu·∫©n ho√° t·∫•t c·∫£ ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi b√™n trong theo URL ngu·ªìn
        absolutizeAttr(section, 'img', 'src', url);
        absolutizeAttr(section, 'link', 'href', url);
        absolutizeAttr(section, 'script', 'src', url);
        absolutizeAttr(section, 'a', 'href', url);

        area.innerHTML = section.innerHTML;

        // Gi·ªØ tr·∫£i nghi·ªám SPA cho c√°c link n·ªôi b·ªô trong ph·∫ßn v·ª´a load
        area.querySelectorAll('a[href]').forEach(a => {
          const href = a.getAttribute('href');
          if (!href || /\.pdf$/i.test(href) || href.startsWith('#')) return;
          try {
            const u = new URL(href, location.href);
            // Ch·ªâ intercept link c√πng host (trong repo) ƒë·ªÉ load v√†o content-area
            if (u.origin === location.origin) {
              a.addEventListener('click', (e) => {
                e.preventDefault();
                loadPanContent(u.href);
              });
            }
          } catch (_) {}
        });

        window.scrollTo({ top: 0, behavior: 'smooth' });
      })
      .catch(err => {
        area.innerHTML = `<p style="color:red;text-align:center;">${err.message}</p>`;
      });
  }

  // ‚úÖ B·∫Øt s·ª± ki·ªán click ƒë·ªông ƒë·ªÉ lu√¥n ho·∫°t ƒë·ªông
  document.addEventListener('click', function (e) {
    const link = e.target.closest('.selectable-box a');
    if (!link) return;
    e.preventDefault();
    loadPanContent(link.getAttribute('href'));
  });
</script>

  <!-- CSS -->
  <style>
    .selectable-box {
      display: inline-block;
      background-color: #f8f9fa;
      border: 2px solid #007bff;
      border-radius: 8px;
      padding: 10px 15px;
      margin: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .selectable-box a {
      text-decoration: none;
      color: #007bff;
      font-weight: bold;
    }

    .selectable-box:hover {
      background-color: #007bff;
      border-color: #0056b3;
    }

    .selectable-box:hover a {
      color: #fff;
    }
  </style>
</section>
